# ğŸ¨ Database Visual Schema - RhizaCore Wallet

**Visual representation of the database structure**

---

## ğŸ“Š Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         RHIZACORE WALLET DATABASE                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     wallet_users         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”‘ id (UUID)             â”‚
â”‚ ğŸ“§ auth_user_id          â”‚
â”‚ ğŸ’¼ wallet_address â­     â”‚
â”‚ ğŸ“§ email                 â”‚
â”‚ ğŸ‘¤ name                  â”‚
â”‚ ğŸ˜€ avatar                â”‚
â”‚ ğŸ­ role                  â”‚
â”‚ âœ… is_active             â”‚
â”‚ ğŸ« referrer_code         â”‚
â”‚ ğŸ• last_login_at         â”‚
â”‚ ğŸ“… created_at            â”‚
â”‚ ğŸ“… updated_at            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ 1:1
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                                   â”‚
           â†“                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   wallet_referrals       â”‚      â”‚  wallet_transactions     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”‘ id (UUID)             â”‚      â”‚ ğŸ”‘ id (UUID)             â”‚
â”‚ ğŸ‘¤ user_id (FK) â­       â”‚      â”‚ ğŸ‘¤ user_id (FK)          â”‚
â”‚ ğŸ‘¥ referrer_id (FK)      â”‚      â”‚ ğŸ’¼ wallet_address        â”‚
â”‚ ğŸ« referral_code â­      â”‚      â”‚ ğŸ”„ type                  â”‚
â”‚ ğŸ’° total_earned          â”‚      â”‚ ğŸ’µ amount                â”‚
â”‚ ğŸ‘¥ total_referrals       â”‚      â”‚ ğŸª™ asset                 â”‚
â”‚ ğŸ† rank                  â”‚      â”‚ ğŸ“¤ to_address            â”‚
â”‚ ğŸ“Š level                 â”‚      â”‚ ğŸ“¥ from_address          â”‚
â”‚ ğŸ“… created_at            â”‚      â”‚ ğŸ”— tx_hash â­            â”‚
â”‚ ğŸ“… updated_at            â”‚      â”‚ âœ… status                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ ğŸ’¸ fee                   â”‚
           â”‚                       â”‚ ğŸ’¬ comment               â”‚
           â”‚ 1:N                   â”‚ ğŸ“¦ metadata (JSON)       â”‚
           â†“                       â”‚ ğŸ“… created_at            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ wallet_referral_earnings â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”‘ id (UUID)             â”‚
â”‚ ğŸ‘¥ referrer_id (FK)      â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ referred_user_id (FK) â”‚      â”‚   wallet_analytics       â”‚
â”‚ ğŸ”— transaction_id (FK)   â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’° amount                â”‚      â”‚ ğŸ”‘ id (UUID)             â”‚
â”‚ ğŸ“Š percentage            â”‚      â”‚ ğŸ‘¤ user_id (FK)          â”‚
â”‚ ğŸ“Š level                 â”‚      â”‚ ğŸ’¼ wallet_address        â”‚
â”‚ ğŸ“… created_at            â”‚      â”‚ ğŸ“Š event_name            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ ğŸ“¦ properties (JSON)     â”‚
                                   â”‚ ğŸ“… created_at            â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  wallet_admin_audit      â”‚
                                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                   â”‚ ğŸ”‘ id (UUID)             â”‚
                                   â”‚ ğŸ‘¨â€ğŸ’¼ admin_id (FK)         â”‚
                                   â”‚ ğŸ¬ action                â”‚
                                   â”‚ ğŸ¯ target_user_id (FK)   â”‚
                                   â”‚ ğŸ“¦ details (JSON)        â”‚
                                   â”‚ ğŸ“… created_at            â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
ğŸ”‘ Primary Key    â­ Unique    (FK) Foreign Key    ğŸ“¦ JSON Data
```

---

## ğŸ”„ Data Flow Visualization

### 1. Wallet Creation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User      â”‚
â”‚  Creates    â”‚
â”‚  Wallet     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Generate TON Wallet                 â”‚
â”‚     - 24-word mnemonic                  â”‚
â”‚     - Wallet address: EQA1B2C3...       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. INSERT wallet_users                 â”‚
â”‚     âœ“ wallet_address                    â”‚
â”‚     âœ“ name: "Rhiza User #XXXX"         â”‚
â”‚     âœ“ avatar: "ğŸŒ±"                      â”‚
â”‚     âœ“ role: "user"                